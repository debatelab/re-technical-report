# Commitment consistency cases {#sec-commitment-consistency}

## Background

Consistency is commonly seen as a necessary condition of coherence. Achieving consistency in RE is, therefore, of utmost importance. In contrast to the desiderata of faithfulness, systematicity and account (see @sec-mod), the desideratum of consistency is not hard-wired into the model. Although the agent is not allowed to choose commitments with flat contradictions (i.e., commitment sets of the form $\{s_i,\dots, \neg s_i\}$), they can choose dialectically inconsistent commitments (i.e., commitments that are inconsistent with respect to the inferential relationships encoded in the dialectical structure $\tau$). Or, more formally, a dialectically inconsistent set of commitments may maximize the achievement during the step of adjusting commitments. Accordingly, the process might end at a fixed point with dialectically inconsistent commitments. The question is, therefore, whether the explicitly modelled desiderata and the specification of the process are sufficiently conducive towards dialectical consistency.^[The main driving force for dialectical consistency is the desideratum of account. Since the choice of new theories is confined to dialectically consistent theories, account will favour commitments that are dialectically consistent.]  

In this chapter, we analyze *dialectical consistency* of inputs and outputs (fixed points and global optima) of RE simulations, which can be examined from three different perspectives:

1. the consistency of output commitments
2. the "consistency case" that arises from combining the consistency status of initial and output commitments
3. the consistency of the union of output commitments and theory

Concerning 2., the juxtaposition of initial and output commitments allows for four cases, which are labelled as follows:

|                                   | endpoint commitments consistent   | endpoint commitment inconsistent  |
| ------                            | ------                            | ----                              |
| **initial commitments consistent**    | consistency preserving (CP)       | consistency eliminating (CE)      |   
| **initial commitments inconsistent**  | inconistency eliminating (IE)     | inconsistency preserving (IP)     |

CP Cases preserve or "transfer" consistency between initial and endpoint commitments. In IE cases, inconsistent initial commitments are revised for consistent endpoint commitments. IP cases fail to eradicate initial inconsistencies, and finally, there may be CE cases if inconsistencies are introduced to initially consistent commitments. 

From the viewpoint of model consolidation, the cases are interesting and relevant in various respects. High shares of IE cases would speak in favour of the model's revisionary power and signify progress towards establishing coherence by RE. Frequent IP cases, in turn, would speak against the model's revisionary power with respect to inconsistent initial commitments. Moreover, this could fuel the objection that RE (or the present model thereof) is overly conservative, such that "garbage in" (inconsistent initial commitments) leads to "garbage out" (inconsistent fixed point/global optimum commitments). High relative shares of CP cases are a desirable feature. Finally, frequent CE cases would be a truly worrisome result, as they would indicate that the model leads to a worsening in terms of consistency.

<!--
## Method

During the generation of an ensemble, we store the consistency status of intial commitments as well as the status for the commitments of every global optima or fixed points for every simulation setup. Furthermore, the consistency of the union of commitments and theory of a global optimum or a fixed point is determined as well. This allows to determine the relative shares of consistent outputs, consistency cases, and consistent unions among all outputs. These relatives shares are this study's main endpoints.

Note that fixed points can be counted in different ways. Taking a result-oriented perspective, we can consider unique fixed points per simulation setup, irrespective of whether they can be reached multiple times through different RE processes from a specific simulation setup. In contrast, we can also take a process-oriented perspective and count every "branch" of an RE process, Hence we might count one fixed point multiple times if it is the enpoint of different branches. In what follows, these  perspectives are reported separately, indicated by "(unique)" or "(all branches)".
-->

## Results

### Overall Results

Similar to the calculation of relative shares in @sec-go-and-fp, the following general results are based on calculating the relative share of properties over all model runs of a specific model.

#### Consistent Outputs

```{python}
#| echo: false
#| label: tbl-consistency_outputs_go
#| tbl-cap: 'Relative share of consistent commitments among global optima'

import pandas as pd
from os import getcwd, path
from pathlib import Path
from IPython.display import Markdown, display


tables_output_dir = path.join(Path(getcwd()).parent.absolute(), "report", "tables")
file_name = 'table_consistency_outputs_go_setups.csv'
df = pd.read_csv(path.join(tables_output_dir, file_name))
df = df.round(3)

display(Markdown(df.to_markdown(index = False)))


#df.style.hide(axis="index")  
```

```{python}
#| echo: false
#| label: tbl-consistency_outputs_fp_setups
#| tbl-cap: 'Relative share of consistent commitments among fixed points (unique)'

import pandas as pd
from os import getcwd, path
from pathlib import Path
from IPython.display import Markdown, display


tables_output_dir = path.join(Path(getcwd()).parent.absolute(), "report", "tables")
file_name = 'table_consistency_outputs_fp_setups.csv'
df = pd.read_csv(path.join(tables_output_dir, file_name))

df = df.round(3)


display(Markdown(df.to_markdown(index = False)))


#df.style.hide(axis="index")  
```

```{python}
#| echo: false
#| label: tbl-consistency_outputs_fp_branches
#| tbl-cap: 'Relative share of consistent commitments among fixed points (all branches)'

import pandas as pd
from os import getcwd, path
from pathlib import Path
from IPython.display import Markdown, display


tables_output_dir = path.join(Path(getcwd()).parent.absolute(), "report", "tables")
file_name = 'table_consistency_outputs_fp_branches.csv'
df = pd.read_csv(path.join(tables_output_dir, file_name))
df = df.round(3)

display(Markdown(df.to_markdown(index = False)))


#df.style.hide(axis="index")  
```

**Observations: Consistent Outputs**

- Overall, the relative share of consistent output commitments is high for all model variants and output types, roughly ranging from 0.69 to 0.95
<!--
New: excluding erroneous simulation runs from the ensemble introduces small differences between global optima of local and global model variants
Old:
- The relative share of global optima with consistent outputs is identical for `QuadraticGlobalRE` and `QuadraticLocalRE`, as well as for `LinearGlobalRE` and `LinearLocalRE` in @tbl-consistency_outputs_go. (Explanation: The local model variants rely on their global counterparts to determine global optima. Hence, these results are not interesting for the present study, but included for the sake of completeness.)
--> 
- The overall relative share of consistent global optima commitments is slightly boosted for linear model variants compared to their quadratic counterparts in @tbl-consistency_outputs_go.
- The relative shares of consistent commitments among fixed points (unique (@tbl-consistency_outputs_fp_setups) and from all branches (@tbl-consistency_outputs_fp_branches)) is slightly lower than the corresponding results for global optima in @tbl-consistency_outputs_go for `QuadraticGlobalRE`, `QuadraticLocalRE`, and `LinearGlobalRE`
- `LinearLocalRE` exhibits substantially higher relative shares of consistent commitments among fixed points (unique and from all branches) 
- The number of fixed points reached through different branches in local model variants is substantially higher than for global model variants (@tbl-consistency_outputs_fp_branches)

#### Consistency Cases

The results of this section are based on a more fine-grained distinction of cases than before. 

```{python}
#| echo: false
#| label: tbl-consistency_cases_go
#| tbl-cap: 'Relative share of consistency cases among global optima'

import pandas as pd
from os import getcwd, path
from pathlib import Path
from IPython.display import Markdown, display


tables_output_dir = path.join(Path(getcwd()).parent.absolute(), "report", "tables")
file_name = 'table_consistency_cases_go_setups.csv'
df = pd.read_csv(path.join(tables_output_dir, file_name))
df = df.round(3)

display(Markdown(df.to_markdown(index = False)))


#df.style.hide(axis="index")  
```

![Relative share of consistency cases among global optima across all configuration of weights](figures/overall_consistency_cases_go_setups){#fig-overall-go}

```{python}
#| echo: false
#| label: tbl-consistency_cases_fp_setups
#| tbl-cap: 'Relative share of consistency cases among fixed points (unique)'

import pandas as pd
from os import getcwd, path
from pathlib import Path
from IPython.display import Markdown, display


tables_output_dir = path.join(Path(getcwd()).parent.absolute(), "report", "tables")
file_name = 'table_consistency_cases_fp_setups.csv'
df = pd.read_csv(path.join(tables_output_dir, file_name))

df = df.round(3)


display(Markdown(df.to_markdown(index = False)))


#df.style.hide(axis="index")  
```

![Relative share of consistency cases among fixed points (unique) across all configuration of weights](figures/overall_consistency_cases_fp_setups){#fig-overall-fp-setups}


```{python}
#| echo: false
#| label: tbl-consistency_cases_fp_branches
#| tbl-cap: 'Relative share of consistency cases among fixed points (all branches)'

import pandas as pd
from os import getcwd, path
from pathlib import Path
from IPython.display import Markdown, display


tables_output_dir = path.join(Path(getcwd()).parent.absolute(), "report", "tables")
file_name = 'table_consistency_cases_fp_branches.csv'
df = pd.read_csv(path.join(tables_output_dir, file_name))
df = df.round(3)

display(Markdown(df.to_markdown(index = False)))


#df.style.hide(axis="index")  
```

![Relative share of consistency cases among fixed points (all branches) across all configuration of weights](figures/overall_consistency_cases_fp_branches){#fig-overall-fp-branches}

**Observations: Consistency Cases**

<!--- As it is to be expected, there are no differences in relative shares for global optima for `QuadraticGlobalRE` and `QuadraticLocalRE`, as well as for `LinearGlobalRE` and `LinearLocalRE`.-->
- The relative share of inconsistency-eliminating and consistency-preserving cases is high for all model variants and output types. Note that their sum corresponds to the relative share of consistent output commitments from above.
- In turn, the relative share of inconsistency-preserving cases is small, and consistency-eliminating cases rarely occur.
- The linear local model variant reaches inconsistent outputs (@fig-overall-fp-setups), but only very few branches result in these commitments (@fig-overall-fp-setups).

#### Consistent Union

In this section, we will analyze the dialectical consistency of whole epistemic states---that is, the union of an epistemic state's commitments and theory. Since we already analyzed the consistency of fixed point commitments and global optima commitments in isolation, we will count only those inconsistencies that arise by combining commitments and theories. In other words, we will not consider inconsistencies that result from inconsistencies in the commitments.

```{python}
#| echo: false
#| label: tbl-consistency_union_go
#| tbl-cap: 'Relative share of global optima with a consistent union of commitments and theory'

import pandas as pd
from os import getcwd, path
from pathlib import Path
from IPython.display import Markdown, display


tables_output_dir = path.join(Path(getcwd()).parent.absolute(), "report", "tables")
file_name = 'table_consistency_union_go_setups.csv'
df = pd.read_csv(path.join(tables_output_dir, file_name))
df = df.round(3)

display(Markdown(df.to_markdown(index = False)))


#df.style.hide(axis="index")  
```


```{python}
#| echo: false
#| label: tbl-consistency_union_fp_setups
#| tbl-cap: 'Relative share of fixed points (unique) with a consistent union of commitments and theory'

import pandas as pd
from os import getcwd, path
from pathlib import Path
from IPython.display import Markdown, display


tables_output_dir = path.join(Path(getcwd()).parent.absolute(), "report", "tables")
file_name = 'table_consistency_union_fp_setups.csv'
df = pd.read_csv(path.join(tables_output_dir, file_name))

df = df.round(3)


display(Markdown(df.to_markdown(index = False)))


#df.style.hide(axis="index")  
```



```{python}
#| echo: false
#| label: tbl-consistency_union_fp_branches
#| tbl-cap: 'Relative share of fixed points (all branches) with a consistent union of commitments and theory'

import pandas as pd
from os import getcwd, path
from pathlib import Path
from IPython.display import Markdown, display


tables_output_dir = path.join(Path(getcwd()).parent.absolute(), "report", "tables")
file_name = 'table_consistency_union_fp_branches.csv'
df = pd.read_csv(path.join(tables_output_dir, file_name))
df = df.round(3)

display(Markdown(df.to_markdown(index = False)))


#df.style.hide(axis="index")  
```

**Observations: Consistent Union**

- The relative shares of consistent unions of commitments and theory among outputs with consistent commitments is very high for all model variants and output types.


### Results Grouped by Weight Configuration

#### Consistency Cases

**Inconsistency Eliminating Cases**

![Relative share of inconsistency eliminating cases among global optima grouped by model variant and configuration of weights.](figures/go_inconsistency_eliminating_cases_setups){#fig-IE-go}

![Relative share of inconsistency eliminating cases among fixed points (unique) grouped by model variant and configuration of weights.](figures/fp_inconsistency_eliminating_cases_setups){#fig-IE-fp-setups}

![Relative share of inconsistency eliminating cases among fixed points (all branches) grouped by model variant and configuration of weights.](figures/fp_inconsistency_eliminating_cases_branches){#fig-IE-fp-branches}

**Observations: Inconsistency eliminating cases (IE)**

- Linear models exhibit a "tipping line" for IE cases among global optima and fixed points. There are no IE cases where $\alpha_{A} < \alpha_{F}$. IE cases occur only for $\alpha_{A} > \alpha_{F}$. See @sec-appendix-tipping for an explanation.
- In contrast, quadratic models have smooth transitions. High weights for account and systematicity, resulting in low weights for faithfulness, benefit the relative share of IE cases among global optima and fixed points.
<!--
- The relative shares of IE cases among global optima do not exceed their counterpart for fixed points.
-->
<!--
- The relative shares of IE cases among global optima are identical for `LinearGlobalRE` and `LinearLocalRE` in @fig-IE-go (as expected).
-->
- The relative shares of IE cases among fixed points from all branches in local model variants (@fig-IE-fp-branches) are slightly boosted in comparison to the consideration of unique fixed points (@fig-IE-fp-setups).



**Consistency Preserving Case (CP)**

![Relative share of consistency preserving cases among global optima grouped by model variant and configuration of weights.](figures/go_consistency_preserving_cases_setups){#fig-CP-go}

![Relative share of consistency preserving cases among fixed points (unique) grouped by model variant and configuration of weights.](figures/fp_consistency_preserving_cases_setups){#fig-CP-fp-setups}

![Relative share of consistency preserving cases among fixed points (all branches) grouped by model variant and configuration of weights.](figures/fp_consistency_preserving_cases_branches){#fig-CP-fp-branches}

**Observations: Consistency Preserving Cases (CP)** 

- Overall, CP cases occur frequently (roughly between 0.40 and 0.60) for all model variants and output types
- The influence of weight configurations is moderately at best.
<!--
- The relative shares of CP cases among global optima are identical for `LinearGlobalRE` and `LinearLocalRE` in @fig-CP-go (as expected).
-->


**Inconsistency Preserving Cases (IP)**

![Relative share of inconsistency preserving cases among global optima grouped by model variant and configuration of weights.](figures/go_inconsistency_preserving_cases_setups){#fig-IP-go}

![Relative share of inconsistency preserving cases among fixed points (unique) grouped by model variant and configuration of weights.](figures/fp_inconsistency_preserving_cases_setups){#fig-IP-fp-setups}

![Relative share of inconsistency preserving cases among fixed points (all branches) grouped by model variant and configuration of weights.](figures/fp_inconsistency_preserving_cases_branches){#fig-IP-fp-branches}

**Observations: Inconsistency Preserving Cases (IP)**

- Linear models exhibit a "tipping line" for IP cases among both global optima and fixed points. There are no IE cases where $\alpha_{A} > \alpha_{F}$. IP cases occur only for $\alpha_{A} < \alpha_{F}$.
- In contrast, quadratic models have smooth transitions. High weights for faithfulness boost the relative shares of IP cases among global optima and fixed points.

**Consistency Eliminating Cases (CE)**

![Relative share of consistency eliminating cases among global optima grouped by model variant and configuration of weights.](figures/go_consistency_eliminating_cases_setups){#fig-CE-go}

![Relative share of consistency eliminating cases among fixed points (unique) grouped by model variant and configuration of weights.](figures/fp_consistency_eliminating_cases_setups){#fig-CE-fp-setups}

![Relative share of consistency eliminating cases among fixed points (all branches) grouped by model variant and configuration of weights.](figures/fp_consistency_eliminating_cases_branches){#fig-CE-fp-branches}

**Observations: Consistency Eliminating Cases (CE)**

- Generally, the relative shares of CE cases are very low.
- Linear models exhibit a "tipping line" for CE cases among both global optima and fixed points. There are no CE cases where $\alpha_{A} > \alpha_{F}$. sIP cases occur only for $\alpha_{A} \leq \alpha_{F}$.
- In contrast, quadratic models have smoother transitions. High weights for faithfulness boost the relative shares of CE cases among global optima and fixed points.


## Conclusion

<!--
What do we want to add from <https://github.com/debatelab/re-studies/blob/master/projects/ensemble_study_02/ensemble-study-02-dataexploration-04.ipynb>?
-->

Overall, the present ensemble study concerning the three perspectives on the consistency of outputs of RE simulations provides positive results with respect to model variation. The overall relative shares of consistent outputs, inconsistency-eliminating and consistency-preserving cases, as well as consistent unions are satisfactorily high for all model variants.

In the more fine-grained analysis according to weigh configurations, we can observe regions of weight configurations that yield desirable behaviour. Moreover, these regions are robust across model variants. This provides at least some motivation to prefer some configurations over others. In particular, it is beneficial to consistency considerations if $\alpha_{A} > \alpha_{F}$.

There is a notable difference between quadratic and linear model variants (smooth transitions vs. tipping line), but on its own, this does not serve as a criterion to prefer some model variants over others. See the @sec-appendix-tipping for a presentation of analytical results that explain why linear model variants exhibit tipping lines.


 <!--A description how an RE process creates a very bad case can be found in [dataexploration-04](https://github.com/debatelab/re-studies/blob/master/projects/ensemble_study_02/ensemble-study-02-dataexploration-04.ipynb) of an earlier ensemble.-->

