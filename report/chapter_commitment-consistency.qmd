# Commitment consistency cases {#sec-commitment-consistency}

**Background**

Consistency is commonly seen as a necessary condition of coherence, and thus achieveing consistency in RE is of utmost importance. This study considers the *dialectical consistency* (opposed to minimal consistency, i.e. the absence of flat contradictions, and the dialectical consistency of commitments plus a theory) of initial and endpoint commitments. The endpoint commitments stem either from a global optimum or from a fixed point. The juxtaposition of initial and endpoint commitments allows for four cases, which are labelled as follows:

|                                   | endpoint commitments consistent   | endpoint commitment inconsistent  |
| ------                            | ------                            | ----                              |
| initial commitments consistent    | consistency preserving (CP)       | consistency eliminating (CE)      |   
| initial commitments inconsistent  | inconistency eliminating (IE)     | inconsistency preserving (IP)     |

Case (CP) preserves or "transfers" consistency between intial and enpoint commitments. In (IE) cases, inconsistent initial commitments are revised for consistent endpoint commitments. (IP) cases fail to eradicate initial inconsistencies, and finally there may be (CE) cases if inconsistencies are introduced to initially consistent commitments.

**Method**

During the generation of an ensemble, we store the consistency status of intial commitments as well as the status for every commitment from global optima or fixed points for every configuration, and label them accordingly. Again, the number of global optima (fixed points) for a case type is put into relation with the total number of global optima (fixed points) for every configuration of weights. The relative share of consistency cases are this study's main endpoint.

From the viewpoint of model consolidation the cases are interesting and relevant in various respects. High shares of 
(IE) cases would stand in support of the model's revisionary power and signify progress towards establishing coherence by RE. Frequent (IP) cases, in turn, would speak against the model's revisionary power with respect to inconsistent initial commitments. Moreover, this could fuel the objection that RE (or the present model thereof) is overly conservative, such that "garbage in" (inconsistent initial commitments) leads to "garbage out" (inconsistent fixed point/global optimum commitments). High relative shares of (CP) cases are a desireabe feature. Finally, frequent (CE) cases would be a truly worrysome result, as they would indicate that the model leads to a worsening in terms of consistency.

**Results**

*Overall*

```{python}
#| echo: false
#| label: tbl-consistency_cases
#| tbl-cap: 'Mean relative share of consistency cases'

import pandas as pd
from os import getcwd, path
from pathlib import Path
from IPython.display import Markdown, display


tables_output_dir = path.join(Path(getcwd()).parent.absolute(), "report", "tables")
file_name = 'table_consistency_cases_go_fp_branches.csv'
df = pd.read_csv(path.join(tables_output_dir, file_name))
#df['% of fixed points in global optima'] = df['% of fixed points in global optima'].map(lambda x: f'{x:.1f}') 
#df['% of global optima in fixed points'] = df['% of global optima in fixed points'].map(lambda x: f'{x:.1f}') 

display(Markdown(df.to_markdown(index = False)))
#df.style.hide(axis="index")  
```

![Mean relative share of consistency cases among global optima across all configuration of weights](figures/overall_consistency_cases_go_setups){#fig-overall-go}

![Mean relative share of consistency cases among fixed points across all configuration of weights](figures/overall_consistency_cases_fp_setups){#fig-overall-fp}

*Grouped by configuration of weights*

![Mean relative share of consistency cases among fixed points grouped by configuration of weights](figures/weight_consistency_cases_go_setups){#fig-weight-go}

![Mean relative share of consistency cases among fixed points grouped by configuration of weights](figures/weight_consistency_cases_fp_setups){#fig-weight-fp}

*Observations: Inconsistency eliminating cases (IE)*

- The relative share of very good cases among global optima and fixed points varies between 10.3% (QDS, ensemble 08) and 22.7% (LDS, ensemble 07)
- Linear models have higher relative shares than quadratic variants in ensembles 08 and 09. 
- The relative share of very good cases among global optima does not exceed its counterpart for fixed points (In ensemble 09, the converse holds.)

- linear model have a "tipping line" for very good cases among both global optima and fixed points
- very good cases occur only below the "tippling line" in linear models
- the mean relative share (and the standard deviation) below the tipping line in linear model are completely uniform.
- all model variants have regions in there heatmpas, where no very good cases occur at all, the maximal relative share of is 37% (ensebmle 07 and 08)/ 47% (ensemble 09) for both global and fixed points

- quadraatic models have smooth transitions
- in quadratic models, high weights for account and low weight for faithfulness benefit the relative share of very good cases among global optima and fixed points

*Observations: Inconsistency preserving cases (IP)*

- The relative share of bad cases among global optima varies between 14.8% (LDS, ensemble 08) and 33.8% (QDS, ensemble 09)
- quadratic models have a higher share of bad cases than linear variants in ensembles 08 and 09. 
- The relative share of bad cases among global optima tend to exceed its counterpart for fixed points (In ensemble 09, the converse holds for linear models.)

- linear model have a "tipping line" for bad cases among both global optima and fixed points
- bad cases occur only above the "tippling line" in linear models
- the mean relative share (and the standard deviation) above the tipping line in linear model are completely uniform.
- all model variants have regions in there heatmpas, where no bad cases occur at all, the maximal relative share of is 37% (ensebmle 07 and 08)/ 47% (ensemble 09) for both global and fixed points

- quadraatic models have smooth transitions
- in quadratic models, high weights for faithfulness and low weight for account increase the relative share of bad cases among global optima and fixed points.

*Observations: Consistency eliminating cases (CE)*

- The relative share of very bad cases among global optima varies between 1.3% (LDS, ensemble 07) and 13.0% (QDS, ensemble 09)
- The relative share of very bad cases among fixed points varies between 0.4% (LPS, ensemble 07) and 8.7% (QDS, ensemble 08)
- quadratic models have a higher share of very bad cases than linear variants for both global optima and fixed points in all ensembles. 
- The relative share of very bad cases among global optima exceed its counterpart for fixed points

- linear model have a "tipping line" for very bad cases among both global optima and fixed points
- very bad cases occur only above the "tippling line" in linear models

- all model variants have regions in there heatmpas, where no very bad cases occur at all

- quadraatic models have smooth transitions
- in quadratic models, low weights for account increase the relative share of very bad cases among global optima and fixed points.



**Conclusion**

<!--
What do we want to add from <https://github.com/debatelab/re-studies/blob/master/projects/ensemble_study_02/ensemble-study-02-dataexploration-04.ipynb>?
-->



Overall, linear models tend to perform better than quadratic variants for all cases, but every model variant has combinations of weights where very (bad) cases disapear and very good cases occur more often. Even very bad cases cannot serve as an exclusion criteria. They have a (very) small share and their manifestation may depend on additional input features (e.g. the size of initial commitmen or their minimal axiomatizsation). <!--A description how an RE process creates a very bad case can be found in [dataexploration-04](https://github.com/debatelab/re-studies/blob/master/projects/ensemble_study_02/ensemble-study-02-dataexploration-04.ipynb) of an earlier ensemble.-->